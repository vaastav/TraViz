{"ast":null,"code":"var _jsxFileName = \"/home/stolet/TraViz/traviz_frontend/src/dc/traceTable.js\";\nimport React from \"react\";\nimport * as dc from \"dc\";\nimport \"dc/dc.css\";\nimport { format as d3Format } from 'd3';\nimport * as d3 from \"d3\";\nimport { TableTemplate } from \"./tableTemplate\";\nimport { numberFormat } from \"./cxContext\";\n\nvar tableFunc = function tableFunc(divRef, ndx) {\n  var traceTable = dc.dataTable(divRef);\n  var dimension = ndx.dimension(function (d) {\n    return d.dd;\n  });\n  var ofs = 0;\n  var pag = 50;\n  traceTable.dimension(dimension).group(function (d) {\n    var format = d3Format('02d');\n    return d.dd.getFullYear() + '/' + format(d.dd.getMonth() + 1);\n  }).columns([{\n    label: 'ID',\n    format: function format(d) {\n      return '<a href=traces/\"' + d.ID + '\">' + d.ID + '</a>';\n    }\n  }, {\n    label: 'Date',\n    format: function format(d) {\n      return d.dd.getUTCFullYear() + \"/\" + (d.dd.getUTCMonth() + 1) + \"/\" + d.dd.getUTCDate();\n    }\n  }, 'Duration', 'NumEvents', 'Tags']).sortBy(function (d) {\n    return d.dd;\n  }).size(Infinity).showGroups(false).on('preRender', function (table) {\n    var totFilteredRecs = ndx.groupAll().value();\n    var end = ofs + pag > totFilteredRecs ? totFilteredRecs : ofs + pag;\n    ofs = ofs >= totFilteredRecs ? Math.floor((totFilteredRecs - 1) / pag) * pag : ofs;\n    ofs = ofs < 0 ? 0 : ofs;\n    table.beginSlice(ofs);\n    table.endSlice(ofs + pag);\n  }).on('preRedraw', function (table) {\n    var totFilteredRecs = ndx.groupAll().value();\n    ofs = table.beginSlice();\n    console.log(ofs);\n    var end = ofs + pag > totFilteredRecs ? totFilteredRecs : ofs + pag;\n    ofs = ofs >= totFilteredRecs ? Math.floor((totFilteredRecs - 1) / pag) * pag : ofs;\n    ofs = ofs < 0 ? 0 : ofs;\n    console.log(ofs);\n    table.beginSlice(ofs);\n    table.endSlice(ofs + pag);\n  }).on('pretransition', function (table) {\n    var totFilteredRecs = ndx.groupAll().value();\n    var end = ofs + pag > totFilteredRecs ? totFilteredRecs : ofs + pag;\n    d3.select('#begin').text(end === 0 ? ofs : ofs + 1);\n    d3.select('#end').text(end);\n    d3.select('#last').attr('disabled', ofs - pag < 0 ? 'true' : null);\n    d3.select('#next').attr('disabled', ofs + pag >= totFilteredRecs ? 'true' : null);\n    d3.select('#size').text(totFilteredRecs);\n\n    if (totFilteredRecs != ndx.size()) {\n      d3.select('#totalsize').text(\"(filtered Total: \" + ndx.size() + \" )\");\n    } else {\n      d3.select('#totalsize').text('');\n    }\n  });\n  return traceTable;\n};\n\nexport var TraceTable = function TraceTable(props) {\n  return React.createElement(TableTemplate, {\n    tableFunction: tableFunc,\n    title: \"Summary Table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  });\n};","map":{"version":3,"sources":["/home/stolet/TraViz/traviz_frontend/src/dc/traceTable.js"],"names":["React","dc","format","d3Format","d3","TableTemplate","numberFormat","tableFunc","divRef","ndx","traceTable","dataTable","dimension","d","dd","ofs","pag","group","getFullYear","getMonth","columns","label","ID","getUTCFullYear","getUTCMonth","getUTCDate","sortBy","size","Infinity","showGroups","on","table","totFilteredRecs","groupAll","value","end","Math","floor","beginSlice","endSlice","console","log","select","text","attr","TraceTable","props"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport * as dc from \"dc\";\nimport \"dc/dc.css\";\n\nimport {format as d3Format } from 'd3'\nimport * as d3 from \"d3\";\nimport { TableTemplate } from \"./tableTemplate\";\nimport { numberFormat } from \"./cxContext\";\n\nconst tableFunc = (divRef, ndx) => {\n    const traceTable = dc.dataTable(divRef);\n\n    const dimension = ndx.dimension(d=> d.dd);\n    var ofs = 0;\n    var pag = 50;\n    traceTable.dimension(dimension)\n    .group(d=>{\n        var format = d3Format('02d');\n        return d.dd.getFullYear() + '/' + format((d.dd.getMonth() + 1));\n    })\n    .columns([\n        {\n            label: 'ID',\n            format: function(d) {\n                return '<a href=traces/\"' + d.ID + '\">' + d.ID + '</a>'\n            }\n        },\n        {\n            label: 'Date',\n            format: function (d) {\n                return d.dd.getUTCFullYear() +\"/\"+ (d.dd.getUTCMonth()+1) +\"/\"+ d.dd.getUTCDate()\n            }\n        },\n        'Duration',\n        'NumEvents',\n        'Tags'\n    ])\n    .sortBy(function (d) {\n        return d.dd;\n    })\n    .size(Infinity)\n    .showGroups(false)\n    .on('preRender', function (table) {\n          var totFilteredRecs = ndx.groupAll().value();\n          var end = ofs + pag > totFilteredRecs ? totFilteredRecs : ofs + pag;\n          ofs = ofs >= totFilteredRecs ? Math.floor((totFilteredRecs - 1) / pag) * pag : ofs;\n          ofs = ofs < 0 ? 0 : ofs;\n          table.beginSlice(ofs);\n          table.endSlice(ofs+pag);\n    })\n    .on('preRedraw', function (table) {\n          var totFilteredRecs = ndx.groupAll().value();\n          ofs = table.beginSlice();\n          console.log(ofs);\n          var end = ofs + pag > totFilteredRecs ? totFilteredRecs : ofs + pag;\n          ofs = ofs >= totFilteredRecs ? Math.floor((totFilteredRecs - 1) / pag) * pag : ofs;\n          ofs = ofs < 0 ? 0 : ofs;\n          console.log(ofs);\n          table.beginSlice(ofs);\n          table.endSlice(ofs+pag);\n    })\n    .on('pretransition', function (table) {\n          var totFilteredRecs = ndx.groupAll().value();\n          var end = ofs + pag > totFilteredRecs ? totFilteredRecs : ofs + pag;\n          d3.select('#begin')\n              .text(end === 0? ofs : ofs + 1);\n          d3.select('#end')\n              .text(end);\n          d3.select('#last')\n              .attr('disabled', ofs-pag<0 ? 'true' : null);\n          d3.select('#next')\n              .attr('disabled', ofs+pag>=totFilteredRecs ? 'true' : null);\n          d3.select('#size').text(totFilteredRecs);\n          if(totFilteredRecs != ndx.size()){\n            d3.select('#totalsize').text(\"(filtered Total: \" + ndx.size() + \" )\");\n          }else{\n            d3.select('#totalsize').text('');\n          }\n    });\n\n    return traceTable;\n\n}\n\nexport const TraceTable = props => (\n    <TableTemplate tableFunction={tableFunc} title=\"Summary Table\"/>\n)\n"]},"metadata":{},"sourceType":"module"}