(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(t,e,n){},149:function(t,e,n){},153:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(77),s=n.n(i);n(91),n(92),n(93);var o=function(){return a.a.createElement("header",null,a.a.createElement("h1",null," TraViz "))},c=n(25),u=n(21),l=n(22),h=n(31),p=n(30),f=n(32),d=n(16),m=n(13),g=(n(63),n(1)),v=n(47),E=n(78),b=n(43),y=n.n(b),w=n(58),D=n(59),x=n.n(D),k="http://198.162.52.119:9000",S=function(){function t(){Object(u.a)(this,t)}return Object(l.a)(t,[{key:"getAllTraces",value:function(){var t=Object(w.a)(y.a.mark(function t(){var e;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat(k,"/overview"),t.abrupt("return",x.a.get(e).then(function(t){return t.data}));case 2:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},{key:"getTrace",value:function(){var t=Object(w.a)(y.a.mark(function t(e){var n;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(k,"/traces/").concat(e),t.abrupt("return",x.a.get(n).then(function(t){return t.data}));case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),O=a.a.createContext("CXContext"),T=(Object(g.l)("%Y-%m-%d %H:%M:%S"),Object(g.n)("%Y-%m-%d %H:%M:%S")),j=Object(g.d)(".2f"),H=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(h.a)(this,Object(p.a)(e).call(this,t))).state={loading:!1,hasNDX:!1,traces:[]},n.traceService=new S,n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.state.hasNDX||this.state.loading||(this.setState({loading:!0}),this.traceService.getAllTraces().then(function(e){console.log("Reached here"),console.log(e),e.forEach(function(t){t.dd=T(t.Date),t.month=Object(g.m)(t.dd),t.Duration=+t.Duration/1e6,t.NumEvents=+t.NumEvents,t.Tags=t.Tags}),console.log(e),t.ndx=E(e),t.setState({loading:!1,hasNDX:!0})}))}},{key:"render",value:function(){return this.state.hasNDX?a.a.createElement(O.Provider,{value:{ndx:this.ndx}},a.a.createElement("div",{ref:this.parent},this.props.children)):null}}]),e}(a.a.Component),N=function(t){return a.a.createElement("input",{id:"next",class:"btn",type:"button",value:"Next",onClick:function(){var e=t.ndx.groupAll().value(),n=(n=t.table.beginSlice())+50>e?e:n+50;t.table.beginSlice(n),t.table.endSlice(n+50),t.table.redraw()}})},C=function(t){return a.a.createElement("input",{id:"last",class:"btn",type:"button",value:"Last",onClick:function(){var e=(e=t.table.beginSlice())-50<0?0:e-50;t.table.beginSlice(e),t.table.endSlice(e+50),t.table.redraw()}})},A=function(t){return a.a.createElement("div",{id:"paging"},"Showing ",a.a.createElement("span",{id:"begin"}),"-",a.a.createElement("span",{id:"end"})," of ",a.a.createElement("span",{id:"size"})," ",a.a.createElement("span",{id:"totalsize"}),a.a.createElement(C,{table:t.table,ndx:t.ndx}),a.a.createElement(N,{table:t.table,ndx:t.ndx}))},L=function(t){var e=a.a.useContext(O),n=a.a.useState(null),r=Object(v.a)(n,2),i=r[0],s=r[1],o=e.ndx,c=a.a.useRef(null);return a.a.useEffect(function(){var e=t.tableFunction(c.current,o);e.render(),s(e)},1),a.a.createElement("div",{ref:c},a.a.createElement("label",null,t.title),a.a.createElement(A,{table:i,ndx:o}))},I=function(t,e){var n=m.dataTable(t),r=e.dimension(function(t){return t.dd}),a=0;return n.dimension(r).group(function(t){var e=Object(g.d)("02d");return t.dd.getFullYear()+"/"+e(t.dd.getMonth()+1)}).columns([{label:"ID",format:function(t){return'<a href=traces/"'+t.ID+'">'+t.ID+"</a>"}},{label:"Date",format:function(t){return t.dd.getUTCFullYear()+"/"+(t.dd.getUTCMonth()+1)+"/"+t.dd.getUTCDate()}},"Duration","NumEvents","Tags"]).sortBy(function(t){return t.dd}).size(1/0).showGroups(!1).on("preRender",function(t){var n=e.groupAll().value();a=(a=a>=n?50*Math.floor((n-1)/50):a)<0?0:a,t.beginSlice(a),t.endSlice(a+50)}).on("preRedraw",function(t){var n=e.groupAll().value();a=t.beginSlice(),console.log(a);a=(a=a>=n?50*Math.floor((n-1)/50):a)<0?0:a,console.log(a),t.beginSlice(a),t.endSlice(a+50)}).on("pretransition",function(t){var n=e.groupAll().value(),r=a+50>n?n:a+50;g.j("#begin").text(0===r?a:a+1),g.j("#end").text(r),g.j("#last").attr("disabled",a-50<0?"true":null),g.j("#next").attr("disabled",a+50>=n?"true":null),g.j("#size").text(n),n!=e.size()?g.j("#totalsize").text("(filtered Total: "+e.size()+" )"):g.j("#totalsize").text("")}),n},M=function(t){return a.a.createElement(L,{tableFunction:I,title:"Summary Table"})},F=n(79),G=function(t){return a.a.createElement("input",{class:"btn",type:"button",value:"Reset",onClick:function(){t.chart.filterAll(),m.redrawAll()}})},P=function(t){var e=a.a.useContext(O),n=a.a.useState(null),r=Object(v.a)(n,2),i=r[0],s=r[1],o=e.ndx,c=a.a.useRef(null);return a.a.useEffect(function(){var e=t.chartFunction(c.current,o);e.render(),s(e)},1),a.a.createElement("div",{ref:c},a.a.createElement("label",null,t.title),a.a.createElement(G,{chart:i}))},R=function(t,e){var n=m.barChart(t),r=e.dimension(function(t){return t.NumEvents}),a=r.group(function(t){return 20*Math.floor(t/20)});return n.dimension(r).group(a).gap(1).x(Object(g.h)().domain([0,400]).rangeRound([0,200])).y(Object(g.h)().domain([0,1e4])).valueAccessor(function(t){return t.value}).centerBar(!0).xUnits(function(){return 21}).renderHorizontalGridLines(!0).filterPrinter(function(t){var e=t[0],n="";return n+=j(e[0])+" -> "+j(e[1])}),n.xAxis().tickFormat(function(t){return t}),n.yAxis().ticks(10).tickFormat(function(t){return t/1e3+"K"}),n},_=function(t){return a.a.createElement(P,{chartFunction:R,title:"Num Events distribution"})},q=function(t,e){var n=m.barChart(t),r=e.dimension(function(t){return t.Duration}),a=r.group(function(t){return 50*Math.floor(t/50)});return n.dimension(r).group(a).gap(1).x(Object(g.h)().domain([0,1e3]).rangeRound([0,400])).y(Object(g.h)().domain([0,2e3])).valueAccessor(function(t){return t.value}).centerBar(!0).xUnits(function(){return 21}).round(m.round.floor).filterPrinter(function(t){var e=t[0],n="";return n+=j(e[0])+"ms -> "+j(e[1])+"ms"}),n.xAxis().tickFormat(function(t){return t}),n.yAxis().tickFormat(function(t){return t}),n},z=function(t){return a.a.createElement(P,{chartFunction:q,title:"Latency Distribution"})},U=function(t,e){var n=m.barChart(t),r=e.dimension(function(t){return t.dd}),a=r.group(g.k);return console.log(r.bottom(1)),n.dimension(r).group(a).round(g.k.round).x(g.i().domain([r.bottom(1)[0].dd,r.top(1)[0].dd]).rangeRound([0,900])),n},W=function(t){return a.a.createElement(P,{chartFunction:U,title:"Days of Traces"})},X=function(t){var e=Object(F.css)({padding:"1rem",marginTop:"2rem"});return a.a.createElement("div",e,a.a.createElement(H,null,a.a.createElement(d.Row,null,a.a.createElement(d.Col,{md:6},a.a.createElement(M,null)),a.a.createElement(d.Col,{md:3}),a.a.createElement(d.Col,{md:3},a.a.createElement(d.Row,null,a.a.createElement(_,null)),a.a.createElement(d.Row,null,a.a.createElement(z,null)),a.a.createElement(d.Row,null,a.a.createElement(W,null))))))},B=n(46),Y=n(27),J=n(26),K=function(){};K.prototype.Lanes=function(){return[]},K.prototype.Events=function(){return[].concat.apply([],this.Lanes().map(function(t){return t.Events()}))},K.prototype.Spans=function(){return[].concat.apply([],this.Lanes().map(function(t){return t.Spans()}))},K.prototype.Threads=function(){return[].concat.apply([],this.Lanes().map(function(t){return t.Threads()}))},K.prototype.Processes=function(){return[].concat.apply([],this.Lanes().map(function(t){return t.Processes()}))},K.prototype.Tasks=function(){return[].concat.apply([],this.Lanes().map(function(t){return t.Tasks()}))},K.prototype.Edges=function(){return[].concat.apply([],this.Lanes().map(function(t){return t.Edges()}))},K.prototype.GC=function(){return[].concat.apply([],this.Lanes().map(function(t){return t.GC()}))},K.prototype.HDD=function(){return[].concat.apply([],this.Lanes().map(function(t){return t.HDD()}))},K.prototype.Network=function(){return[].concat.apply([],this.Lanes().map(function(t){return t.Network()}))},K.prototype.Fill=function(t){return arguments.length?(this.fill=t,this):this.fill?this.fill:0},K.prototype.Height=function(t){var e=this.Spacing();return 0==this.Lanes().length?0:this.Lanes().map(function(t){return t.Height()}).reduce(function(t,n){return t+n+e})},K.prototype.Offset=function(t){if(!arguments.length)return this.offset?this.offset:0;this.offset=t;var e=this.Spacing();return this.Lanes().forEach(function(n){n.Offset(t),t+=n.Height()+e}),this},K.prototype.Spacing=function(t){return arguments.length?(this.spacing=t,this.Offset(this.Offset()),this):this.spacing?this.spacing:0},K.Scale=function(t){return{Height:function(e){return t(e.Height())},Offset:function(e){return t(e.Offset())}}};var V=function(t,e){this.layout=t,this.process=e;var n=this;this.lanes=e.Threads().map(function(t){return new J.ThreadLane(n,t)}),this.Fill(g.g(200+20*Math.random(),200+20*Math.random(),200+20*Math.random())),this.lanes.forEach(function(t){t.Fill(n.Fill())}),this.Spacing(1).Offset(0);n=this;this.Events().forEach(function(t){t.group=n}),this.Spans().forEach(function(t){t.group=n}),this.GC().forEach(function(t){t.group=n}),this.Edges().filter(function(t){return t.parent.lane!=t.child.lane&&t.parent.group==n}).forEach(function(t){t.type="group"})};(V.prototype=new K).Lanes=function(){return this.lanes},V.prototype.GC=function(){return this.process.GCEvents()};var Q=function(t,e){this.layout=t,this.tasks=e;var n=this;this.lanes=e.map(function(t){return new J.TaskLane(n,t)}),this.Fill(g.g(200+20*Math.random(),200+20*Math.random(),200+20*Math.random())),this.lanes.forEach(function(t){t.Fill(n.Fill())}),this.Spacing(1).Offset(0),e.forEach(function(t){t.group=n}),this.HDD().forEach(function(t){t.group=n}),this.Network().forEach(function(t){t.group=n})};(Q.prototype=new K).Lanes=function(){return this.lanes};var Z=n(42),$=n.n(Z),tt=tt||{};tt.width=function(){return document.body.clientWidth},tt.height=function(){return document.body.clientHeight};String.prototype.hashCode=function(){var t,e=0;if(0==this.length)return e;for(t=0;t<this.length;t++)e=(e<<5)-e+this.charCodeAt(t),e&=e;return e};var et=function(t){return t.EventID},nt=function(){var t=0;return function(){return t++}}();function rt(t,e){for(var n={},r=0;r<t.length;r++)try{var a=t[r][e];a in n||(n[a]=[]),n[a].push(t[r])}catch(i){console.log(i)}return n}var at=function(){var t=null,e=[],n=[],r=!0,a=!0,i=function(i){r&&(i.prototype.ID=function(){return this.fqid},i.prototype.globalID=function(){return this.id},i.getID=function(t){return t.ID()},i.getGlobalID=function(t){return t.globalID()}),null!=t&&(i.prototype.getter=t,e.push(t));for(var s=0;s<e.length;s++){var o=e[s],c=o.toLowerCase();i.prototype[o]=function(t){return function(){return this[t]}}(c)}if(null!=t){for(s=0;s<n.length;s++)i.prototype[n[s]]=function(t){return function(e){if(this[t.toLowerCase()])return this[t.toLowerCase()];var n=[].concat.apply([],this[this.getter]().map(function(e){return e[t](!0)}));return e||(this[t.toLowerCase()]=n),n}}(n[s]);a&&(i.prototype.Start=function(){return null==this.start&&(this.start=Math.min.apply(this,this[this.getter]().map(function(t){return t.Start()}))),this.start},i.prototype.End=function(){return null==this.end&&(this.end=Math.max.apply(this,this[this.getter]().map(function(t){return t.End()}))),this.end},i.prototype.Duration=function(){return this.End()-this.Start()})}};return i.getter=function(e){return arguments.length?(t=e,i):t},i.accessors=function(t){return arguments.length?(e=t,i):e},i.mappers=function(t){return arguments.length?(n=t,i):n},i.id=function(t){return arguments.length?(r=t,i):r},i.times=function(t){return arguments.length?(a=t,i):a},i},it=function(t,e){if(this.report=e,this.span=t,this.id=e.id,this.fqid=this.id,this.timestamp=e.Timestamp,this.type="event",e.Operation&&(this.type="operation "+e.Operation),this.start=this.timestamp,this.end=this.timestamp,this.duration=0,e.Duration&&(this.duration=Number(e.Duration)/1e6,this.start=this.timestamp-this.duration,this.end=this.timestamp),e.Operation&&"file"==e.Operation.substr(0,4)&&-1!=e.Agent.indexOf("ScheduledFileIO")){var n=["PreWait","PreDuration","IOWait","IODuration","PostWait","PostDuration"];this.duration=0;for(var r=0;r<n.length;r++)this.report[n[r]]&&(this.duration+=Number(this.report[n[r]]));this.duration=this.duration/1e6,this.start=this.timestamp-this.duration,this.end=this.timestamp}this.span.thread.process.machine.task.reports_by_id[this.id]=this};it.prototype.Edges=function(){if(null==this.edges){this.edges=[];for(var t=this.report.ParentEventID,e=0;null!=t&&e<t.length;e++){var n={id:this.id+t[e],parent:this.span.thread.process.machine.task.reports_by_id[t[e]],child:this};n.parent&&n.child&&this.edges.push(n)}}return this.edges},at().accessors(["Timestamp"])(it);var st=function(t,e,n){this.thread=t,this.id=this.thread.fqid+"_Span-"+e,this.fqid=this.id,this.events=[],this.waiting=!1;for(var r=0;r<n.length;r++)n[r].Operation&&n[r].Operation.substring(0,4),this.events.push(new it(this,n[r]));this.events.sort(function(t,e){return t.timestamp-e.timestamp}),this.start=this.events[0].Timestamp(),this.end=this.events[this.events.length-1].Timestamp(),this.hddevents=this.Events().filter(function(t){return t.report.Operation&&"file"==t.report.Operation.substring(0,4)}),this.networkevents=this.Events().filter(function(t){return t.report.Operation&&(t.report.Operation.startsWith("net")||t.report.Operation.startsWith("loopback"))})};at().getter("Events").accessors(["HDDEvents","NetworkEvents"]).mappers(["Edges"])(st);var ot=function(t,e,n){n.sort(function(t,e){return t.Timestamp-e.Timestamp}),this.process=t,this.id=this.process.id+"_Thread-"+e,this.fqid=this.process.fqid+"_Thread-"+e,this.spans=[];for(var r=[],a=0;a<n.length;a++)if(n[a].Operation&&"waited"==n[a].Operation){var i=Number(n[a].Duration)/1e6;r.push(n[a]);var s=new st(this,this.spans.length,r),o=s.events[s.events.length-1];this.spans.push(s);var c=new st(this,this.spans.length,[n[a],n[a]]);c.waiting=!0,c.events[0].timestamp=c.events[0].timestamp-i,o.timestamp=c.events[0].timestamp,this.spans.push(c),s.end=o.timestamp,c.start=c.events[0].timestamp,r=[n[a]]}else n[a].Operation&&"unset"==n[a].Operation?(r.push(n[a]),this.spans.push(new st(this,this.spans.length,r)),r=[]):r.push(n[a]);r.length>0&&this.spans.push(new st(this,this.spans.length,r)),this.spans.sort(function(t,e){return t.Start()-e.Start()}),this.shortname="Thread-"+this.id;var u={};u[this.shortname]=!0;var l=this.Events();for(a=0;a<l.length;a++)l[a].report.ThreadName&&(u[l[a].report.ThreadName]=!0);delete u[this.shortname];var h=Object.keys(u);if(h.length>0){var p=h[0];p.length>20?this.shortname=p.substring(0,20)+"...":this.shortname=p}};at().getter("Spans").accessors(["ShortName"]).mappers(["Events","Edges","HDDEvents","NetworkEvents"])(ot);var ct=function(t,e,n){if(this.machine=t,this.processid=e,this.id=this.machine.id+"_Process-"+e.replace("@",""),this.fqid=this.machine.fqid+"_Process-"+e.replace("@",""),this.gcevents=[],n[0].HRT){for(var r=0,a=0,i=0,s=0;s<n.length;s++)r+=Number(n[s].Timestamp),a+=Number(n[s].HRT),i+=1;var o=a/i,c=r/i;for(s=0;s<n.length;s++){var u=c+(Number(n[s].HRT)-o)/1e6;n[s].Timestamp=u}}var l=rt(n,"ThreadID");for(var h in this.threads=[],l)this.threads.push(new ot(this,h,l[h]));this.threads.sort(function(t,e){return t.Start()-e.Start()})};ct.prototype.addGCData=function(t){var e=t[this.processid];if(e){var n=this;this.gcevents=e.map(function(t){return new pt(n,t)}),this.gcevents=this.gcevents.filter(function(t){return t.start<=n.End()&&t.end>=n.Start()&&t.duration>0})}},at().getter("Threads").accessors(["GCEvents"]).mappers(["Spans","Events","Edges","HDDEvents","NetworkEvents"])(ct);var ut=function(t,e,n){this.task=t,this.id="Machine-"+e,this.fqid=this.task.ID()+"_"+this.id,this.llid="Machine-"+this.id;var r=rt(n,"ProcessID");for(var a in this.processes=[],r)this.processes.push(new ct(this,a,r[a]));this.processes.sort(function(t,e){return t.Start()-e.Start()})};at().getter("Processes").mappers(["Threads","Spans","Events","Edges","HDDEvents","NetworkEvents","GCEvents"])(ut);var lt=function(t){this.id=t.id,this.fqid="Task-"+this.id,this.reports=t.reports,this.reports_by_id={};for(var e=0;e<this.reports.length;e++){var n=this.reports[e];null==n.EventID?n.id=""+(Math.floor(9e6*Math.random())+1e6):n.id=n.EventID,this.reports_by_id[n.id]=n}this.machines=[];var r=rt(t.reports,"Host");for(var a in r)this.machines.push(new ut(this,a,r[a]));this.machines.sort(function(t,e){return t.Start()-e.Start()});var i={};for(e=0;e<this.reports.length;e++)if(this.reports[e].Tag)for(var s=0;s<this.reports[e].Tag.length;s++)i[this.reports[e].Tag[s]]=!0;this.tags=Object.keys(i)};at().getter("Machines").accessors(["Tags"]).mappers(["Processes","Threads","Spans","Events","Edges","GCEvents","HDDEvents","NetworkEvents"])(lt);var ht=function(t,e){window.workload=this,this.data=[],this.gcdata=e,this.id=nt(),this.fqid=this.id,this.tasks=[];for(var n=0;n<t.length;n++)this.addTask(t[n])};ht.prototype.addTask=function(t){this.data.push(t);var e=new lt(t);this.tasks.push(e),this.tasks.sort(function(t,e){return t.Start()-e.Start()}),this.start=null,this.end=null,this.min=this.Start(),this.max=this.End();var n=this.gcdata;n&&e.Processes().forEach(function(t){t.addGCData(n)})},ht.prototype.addGC=function(t){this.gcdata=t,this.gcdata&&this.Processes().forEach(function(e){e.addGCData(t)})},at().getter("Tasks").mappers(["Machines","Processes","Threads","Spans","Events","Edges","GCEvents","HDDEvents","NetworkEvents"])(ht);var pt=function(t,e){this.report=e,this.process=t,null==e.EventID?e.id=""+(Math.floor(9e6*Math.random())+1e6):e.id=e.EventID,this.xtraceid=e.id,this.id=this.process.fqid+"_GC-"+this.xtraceid,this.fqid=this.id,this.start=Number(this.report.GcStart)+1,this.duration=Number(this.report.GcDuration)-1,this.end=this.start+this.duration,this.name=this.report.GcName};function ft(t){var e=t.map(function(t){return t.report}),n=t[0];t.forEach(function(t){t.Timestamp()>n.Timestamp()&&(n=t)});for(var r=function(t,e){null==e&&(e=t[t.length-1]);for(var n={},r=0;r<t.length;r++)n[et(t[r])]=t[r];for(var a=[],i=e;i&&i.ParentEventID;){a.push(i);var s=i.ParentEventID;for(i=n[s[0]],r=1;null==i&&r<s.length;r++)i=n[s[r]];for(r=1;r<s.length;r++){var o=n[s[r]];n[s[r]]&&Number(o.Timestamp)>Number(i.Timestamp)&&(i=o)}}return a}(e,n.report),a={},i=0;i<r.length;i++)a[et(r[i])]=!0;return t.filter(function(t){return a[t.id]})}at().accessors(["Start","Duration","Name"])(pt);n(148);var dt=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(h.a)(this,Object(p.a)(e).call(this,t))).createSwimlane=n.createSwimlane.bind(Object(B.a)(n)),n}return Object(f.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.createSwimlane()}},{key:"componentDidUpdate",value:function(){this.createSwimlane()}},{key:"createSwimlane",value:function(){var t=this.node,e=0,n=0,r=500,a=100,i=120,s={showevents:!0,showedges:!0,showgc:!0,showspans:!0,showcpath:!1},o={refresh:function(){}},c=Y.a(),u=g.b(),l=g.a().ticks(10).tickSize(6,0,0);function h(s){s.each(function(s){c.range([0,r]);var l=Y.a().domain([0,s.Height()]).range([0,a]),h=g.j(t).selectAll(".clipdef").data([s]);h.enter().append("defs").attr("class","clipdef").append("clipPath").attr("id","clip").append("rect"),h.select("rect").attr("width",r).attr("height",a),h.exit().remove();var p=g.j(t).selectAll(".main").data([s]),f=p.enter().append("g").attr("class","main"),d=f.append("g").attr("class","lanes");d.append("g").attr("class","lane-background"),d.append("g").attr("class","axis"),d.append("g").attr("class","spans"),d.append("g").attr("class","timeindicator").append("line"),d.append("g").attr("class","edges"),d.append("g").attr("class","gc"),d.append("g").attr("class","hdd"),d.append("g").attr("class","network"),d.append("g").attr("class","events");var m=f.append("g").attr("class","margin");m.append("g").attr("class","lane-labels"),m.append("g").attr("class","lane-controls"),p.exit().remove(),p.attr("transform","translate("+e+","+n+")").attr("width",r).attr("height",a),p.selectAll(".lanes").attr("transform","translate("+i+",0)");var v=p.select(".lane-background").selectAll("rect").data(s.Lanes());v.enter().append("rect").attr("fill",J.Lane.Fill),v.attr("x",0).attr("y",J.Lane.Scale(l).Offset).attr("width",r).attr("height",J.Lane.Scale(l).Height),v.exit().remove();var E=p.select(".lane-labels").selectAll("text").data(s.Lanes());E.enter().append("text").attr("text-anchor","end").attr("fill",function(t){return t.Fill().darker(1)}).text(J.Lane.Label),E.attr("x",i-12).attr("y",function(t){return l(t.Offset()+.5*t.Height())}).attr("dominant-baseline","middle"),E.exit().remove();var b=p.select(".lane-controls").selectAll("rect.groupcontrols").data(s.Groups());b.enter().append("rect").attr("class","groupcontrols"),b.attr("x",i-6).attr("y",K.Scale(l).Offset).attr("width",4).attr("height",K.Scale(l).Height).attr("fill",function(t){return t.Fill().darker(1)}),b.exit().remove(),p.select(".axis").attr("transform","translate(0,"+a+")"),p.select(".spans").attr("clip-path","url(#clip)"),p.select(".timeindicator").attr("clip-path","url(#clip)"),p.select(".edges").attr("clip-path","url(#clip)"),p.select(".gc").attr("clip-path","url(#clip)"),p.select(".hdd").attr("clip-path","url(#clip)"),p.select(".network").attr("clip-path","url(#clip)"),p.select(".events").attr("clip-path","url(#clip)"),p.select(".timeindicator line").attr("y1",0).attr("y2",a),p.on("mousemove",function(e){var n=g.f(t)[0]-i;g.j(t).select(".timeindicator line").attr("x1",n).attr("x2",n)});var y=!1,w=null;g.j(t).on("mousedown",function(){y=!0,w=null}),g.j(t).on("mouseup",function(){y=!1,w=null});var D=g.o();D.on("zoom",function(){var e=s.workload,n=e.max-e.min,r=e.min-n/10,a=e.max+n/10,l=c.invert(g.f(t)[0]-i),h=u.extent()[0],p=u.extent()[1];if(y){if(null!=w){var f=c.invert(w)-c.invert(g.c.translate[0]);(h>r||f>0)&&(p<a||f<0)&&(h+=f,p+=f,l+=f)}w=g.c.translate[0]}if(h=l+(h-l)/g.c.scale,p=l+(p-l)/g.c.scale,(h=Math.max(h,r))>(p=Math.min(p,a))){console.log("inverted",h,p,g.c.scale,u.extent());var d=h;h=p,p=d}u.extent([h,p]),o.refresh.call(t),D.scale(1)}),D.call(g.j(t)),p.select(".spans").selectAll("rect").remove(),p.select(".events").selectAll("circle").remove(),p.select(".edges").selectAll("line").remove(),p.select(".gc").selectAll("rect").remove(),p.select(".hdd").selectAll("rect").remove(),p.select(".network").selectAll("rect").remove()})}h.refresh=function(e){e.each(function(e){var n=g.j(t).select(".main");c.domain(u.extent());var i=Y.a().domain([0,e.Height()]).range([0,a]),o=c.domain()[0],h=c.domain()[1],p=((new Date).getTime(),e.Spans().filter(function(t){return t.Start()<h&&t.End()>o})),f=e.GC().filter(function(t){return t.start<h&&t.end>o}),d=e.HDD().filter(function(t){return t.start<h&&t.end>o}),m=e.Network().filter(function(t){return t.start<h&&t.end>o}),v=e.Events();1==s.showcpath&&(v=ft(v)),v=v.filter(function(t){return t.Timestamp()>o&&t.Timestamp()<h});var E=e.Edges();if(1==s.showcpath&&(E=E.filter(function(t){return-1!=$.a.inArray(t.parent,v)&&-1!=$.a.inArray(t.child,v)})),E=E.filter(function(t){return t.parent.Timestamp()<h&&t.child.Timestamp()>o}),(new Date).getTime(),1==s.showspans){var b=n.select(".spans").selectAll("rect").data(p,st.getID);b.enter().append("rect").classed("waiting",function(t){return t.waiting}).attr("y",function(t){return i(t.lane.Offset()+.1*t.lane.Height())}).attr("height",function(t){return i(.8*t.lane.Height())}),b.attr("x",function(t){return c(t.Start())}).attr("width",function(t){return c(t.End())-c(t.Start())}),b.exit().remove()}else n.select(".spans").selectAll("rect").remove();if(1==s.showevents){var y=n.select(".events").selectAll("circle").data(v,it.getID);y.enter().append("circle").attr("class",function(t){return t.type}).attr("cy",function(t){return i(t.lane.Offset()+.5*t.lane.Height())}).attr("r",function(t){return"event"==t.type?5:2}).attr("id",function(t){return t.ID()}),y.attr("cx",function(t){return c(t.Timestamp())}),y.exit().remove()}else n.select(".events").selectAll("circle").remove();if(1==s.showedges){var w=n.select(".edges").selectAll("line").data(E,function(t){return t.id});w.enter().append("line").attr("y1",function(t){return i(t.parent.lane.Offset()+.5*t.parent.lane.Height())}).attr("y2",function(t){return i(t.child.lane.Offset()+.5*t.child.lane.Height())}),w.exit().remove(),w.attr("x1",function(t){return c(t.parent.Timestamp())}).attr("x2",function(t){return c(t.child.Timestamp())}).attr("class",function(t){return t.type})}else n.select(".edges").selectAll("line").remove();if(1==s.showgc){var D=n.select(".gc").selectAll("rect").data(f,pt.getID);D.enter().append("rect").attr("y",function(t){return i(t.group.Offset())}).attr("height",function(t){return i(t.group.Height())}),D.attr("x",function(t){return c(t.start)}).attr("width",function(t){return c(t.end)-c(t.start)}),D.exit().remove()}else n.select(".gc").selectAll("rect").remove();var x=n.select(".hdd").selectAll("rect").data(d,it.getID);x.enter().append("rect").attr("class",function(t){return t.type}).attr("y",function(t){return i(t.lane.Offset()+.25*t.lane.Height())}).attr("height",function(t){return i(.5*t.lane.Height())}),x.attr("x",function(t){return c(t.start)}).attr("width",function(t){return c(t.end)-c(t.start)}),x.exit().remove();var k=n.select(".network").selectAll("rect").data(m,it.getID);k.enter().append("rect").attr("class",function(t){return t.type}).attr("y",function(t){return i(t.lane.Offset()+.25*t.lane.Height())}).attr("height",function(t){return i(.5*t.lane.Height())}),k.attr("x",function(t){return c(t.start)}).attr("width",function(t){return c(t.end)-c(t.start)}),k.exit().remove();var S=Y.a().range([0,r]).domain([u.extent()[0]-e.workload.min,u.extent()[1]-e.workload.min]);n.select(".axis").call(l.scale(S))})},h.on=function(t,e){return null==e?o[t]:(o[t]=e,h)},h.brush=function(t){return arguments.length?(u=t,h):u},h.x=function(t){return arguments.length?(e=t,h):e},h.y=function(t){return arguments.length?(n=t,h):n},h.width=function(t){return arguments.length?(r=t,h):r},h.height=function(t){return arguments.length?(a=t,h):a},h.margin=function(t){return arguments.length?(i=t,h):i},h.property=function(e,n){s[e]=n,h.on("refresh").call(t)}}},{key:"render",value:function(){var t=this;return a.a.createElement("svg",{ref:function(e){return t.node=e},width:500,height:500})}}]),e}(r.Component),mt=function(t){function e(){return Object(u.a)(this,e),Object(h.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(f.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(d.Grid,null,a.a.createElement(X,null)),a.a.createElement("div",null,a.a.createElement(dt,null)))}}]),e}(a.a.Component);n(149);var gt=function(){return a.a.createElement("main",null,a.a.createElement(c.c,null,a.a.createElement(c.a,{exact:!0,path:"/",component:mt})))};var vt=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(o,null),a.a.createElement(gt,null))},Et=n(57);s.a.render(a.a.createElement(Et.a,null,a.a.createElement(vt,null)),document.getElementById("root"))},26:function(t,e){var n=function(){};n.prototype.Events=function(){return[]},n.prototype.Spans=function(){return[]},n.prototype.Threads=function(){return[]},n.prototype.Processes=function(){return[]},n.prototype.Tasks=function(){return[]},n.prototype.Edges=function(){return[]},n.prototype.GC=function(){return[]},n.prototype.HDD=function(){return[]},n.prototype.Network=function(){return[]},n.prototype.Height=function(){return arguments.length?(this.height=null,this):this.height?this.height:10},n.prototype.Fill=function(){return arguments.length?(this.fill=null,this):this.fill?this.fill:0},n.prototype.Offset=function(){return arguments.length?(this.offset=null,this):this.offset?this.offset:0},n.prototype.Label=function(){return arguments.length?(this.label=null,this):this.label?this.label:""},n.Scale=function(t){return{Height:function(e){return t(e.Height())},Offset:function(e){return t(e.Offset())}}},n.Fill=function(t){return t.Fill()},n.Label=function(t){return t.Label()};var r=function(t,e){this.group=t,this.thread=e,this.Label(e.ShortName());var n=this;this.Events().forEach(function(t){t.lane=n}),this.Spans().forEach(function(t){t.lane=n}),this.Edges().filter(function(t){return t.parent.lane==n}).forEach(function(t){t.type="lane"})};(r.prototype=new n).Events=function(){return this.thread.Events()},r.prototype.Spans=function(){return this.thread.Spans()},r.prototype.Edges=function(){return this.thread.Edges()},r.prototype.HDD=function(){return this.thread.HDDEvents()},r.prototype.Network=function(){return this.thread.NetworkEvents()};var a=function(t,e){this.group=t,this.task=e,this.Label(e.ID());var n=this;this.task.lane=n,this.HDD().forEach(function(t){t.lane=n}),this.Network().forEach(function(t){t.lane=n})};(a.prototype=new n).Spans=function(){return[this.task]},a.prototype.HDD=function(){return this.task.HDDEvents()},a.prototype.Network=function(){return this.task.NetworkEvents()}},86:function(t,e,n){t.exports=n(153)},91:function(t,e,n){},92:function(t,e,n){},93:function(t,e,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.3944835b.chunk.js.map